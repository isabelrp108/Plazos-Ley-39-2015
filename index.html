<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plazos Ley 39/2015</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: left;
        }
        h1 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .question-box {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .options label {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .options label:hover {
            background-color: #e9ecef;
        }
        .options input[type="radio"] {
            margin-right: 10px;
        }
        button {
            background-color: #007bff; /* Color primario */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            margin-top: 10px;
            display: block;
            width: 100%;
        }
        button:hover {
            background-color: #0056b3;
        }
        #feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            text-align: center;
            display: block; 
        }
        .correct {
            background-color: #d4edda;
            color: #155724;
        }
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
        }
        .score-box {
            text-align: center;
            padding: 20px;
            border: 2px solid #007bff;
            border-radius: 5px;
            margin-top: 30px;
        }
        .score-box h2 {
            margin-top: 0;
            color: #007bff;
        }
    </style>
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body onload="initQuiz()">

<div class="container">
    <h1>Plazos Ley 39/2015</h1>
    <div id="quiz-container">
        </div>
    
    <div id="feedback"></div>
    
    <button id="action-button" onclick="handleQuizClick()">Continuar</button> 

    <div id="result-screen" style="display:none;">
        </div>
</div>

<script>
    // Banco de preguntas
    const questions = [
        { q: "Plazo m√°ximo para <strong>desestimar</strong> una solicitud de <strong>tramitaci√≥n simplificada</strong> (Art. 96.3).", options: ["3 d√≠as", "5 d√≠as", "7 d√≠as"], correct: "B", feedback: "El √≥rgano competente debe desestimar en <strong>5 d√≠as</strong> la solicitud de tramitaci√≥n simplificada. El silencio en este caso es negativo (Art. 96.3)." },
        { q: "Plazo para expedir de oficio el <strong>certificado de silencio administrativo</strong> (Art. 24.4).", options: ["10 d√≠as", "15 d√≠as", "30 d√≠as"], correct: "B", feedback: "La Administraci√≥n debe expedir el certificado de silencio administrativo de oficio en <strong>15 d√≠as</strong> (Art. 24.4)." },
        { q: "Plazo para cursar la <strong>notificaci√≥n</strong> de un acto administrativo una vez dictado (Art. 40.2).", options: ["10 d√≠as", "15 d√≠as", "20 d√≠as"], correct: "A", feedback: "La notificaci√≥n debe ser cursada en el plazo de <strong>10 d√≠as</strong> a partir de la fecha en que el acto haya sido dictado (Art. 40.2)." },
        { q: "Plazo <strong>m√≠nimo</strong> para el <strong>per√≠odo de prueba</strong> (Art. 77.2).", options: ["10 d√≠as", "15 d√≠as", "30 d√≠as"], correct: "A", feedback: "El per√≠odo de prueba no ser√° inferior a <strong>10 d√≠as</strong> ni superior a 30 d√≠as (Art. 77.2)." },
        { q: "Plazo <strong>m√°ximo</strong> para dictar y notificar la resoluci√≥n de un recurso de <strong>reposici√≥n</strong> (Art. 124.2).", options: ["1 mes", "3 meses", "6 meses"], correct: "A", feedback: "El plazo m√°ximo es de <strong>1 mes</strong>. Transcurrido este plazo sin resoluci√≥n, se entiende desestimado el recurso (Art. 124.2)." },
        { q: "Plazo de <strong>caducidad</strong> si el procedimiento iniciado a solicitud del interesado se <strong>paraliza por causa imputable a √©l</strong> (Art. 95.1).", options: ["1 mes", "3 meses", "6 meses"], correct: "B", feedback: "Se produce la caducidad si el procedimiento queda paralizado por causa imputable al interesado durante <strong>3 meses</strong> (Art. 95.1)." },
        { q: "Plazo <strong>m√≠nimo</strong> para la presentaci√≥n de <strong>alegaciones en el tr√°mite de audiencia</strong> (Art. 82.2).", options: ["7 d√≠as", "10 d√≠as", "15 d√≠as"], correct: "B", feedback: "El plazo no puede ser inferior a <strong>10 d√≠as</strong> ni superior a 15 d√≠as (Art. 82.2)." },
        { q: "Plazo <strong>m√°ximo</strong> para declarar la <strong>lesividad</strong> de un acto anulable (Art. 107.2).", options: ["1 a√±o", "4 a√±os", "5 a√±os"], correct: "B", feedback: "La declaraci√≥n de lesividad no puede adoptarse una vez transcurridos <strong>4 a√±os</strong> desde que se dict√≥ el acto (Art. 107.2)." },
        { q: "Plazo para que se produzca el <strong>silencio negativo</strong> en <strong>responsabilidad patrimonial</strong> (Art. 91.3).", options: ["3 meses", "6 meses", "1 a√±o"], correct: "B", feedback: "El plazo de resoluci√≥n es de 6 meses y el silencio es <strong>desestimatorio</strong> (negativo) (Art. 91.3)." },
        { q: "Plazo <strong>m√≠nimo</strong> para la presentaci√≥n de <strong>alegaciones en el periodo de informaci√≥n p√∫blica</strong> (Art. 83.2).", options: ["10 d√≠as", "20 d√≠as", "30 d√≠as"], correct: "B", feedback: "El plazo ser√° como m√≠nimo de <strong>20 d√≠as</strong> (Art. 83.2)." },
        { q: "Plazo de alegaciones para los interesados tras la finalizaci√≥n de <strong>actuaciones complementarias</strong> (Art. 87).", options: ["5 d√≠as", "7 d√≠as", "10 d√≠as"], correct: "B", feedback: "El √≥rgano instructor debe comunicar la realizaci√≥n de actuaciones complementarias y otorgar un plazo de <strong>7 d√≠as</strong> para formular alegaciones (Art. 87)." },
        { q: "Plazo <strong>m√°ximo</strong> para dictar y notificar la resoluci√≥n de un <strong>recurso de alzada</strong> (Art. 122.2).", options: ["1 mes", "3 meses", "6 meses"], correct: "B", feedback: "El plazo m√°ximo es de <strong>3 meses</strong>. Transcurrido este plazo sin resoluci√≥n, se entiende desestimado el recurso (Art. 122.2)." },
        { q: "Plazo de <strong>prescripci√≥n</strong> para la reclamaci√≥n de <strong>responsabilidad patrimonial</strong> (Art. 67.1).", options: ["6 meses", "1 a√±o", "4 a√±os"], correct: "B", feedback: "El derecho a reclamar prescribe al <strong>a√±o</strong> de producido el hecho o manifestado el efecto lesivo (Art. 67.1)." },
        { q: "Plazo para que los terceros interesados <strong>insten la continuaci√≥n del procedimiento</strong> tras desistimiento del inicial (Art. 94.4).", options: ["7 d√≠as", "10 d√≠as", "15 d√≠as"], correct: "B", feedback: "Los terceros interesados tienen <strong>10 d√≠as</strong> para instar su continuaci√≥n. Si no lo hacen, se produce la caducidad (Art. 94.4)." },
        { q: "Plazo <strong>m√°ximo</strong> para la apertura del <strong>per√≠odo de prueba</strong> (Art. 77.2).", options: ["15 d√≠as", "20 d√≠as", "30 d√≠as"], correct: "C", feedback: "El periodo de prueba no ser√° superior a <strong>30 d√≠as</strong> ni inferior a 10 d√≠as (Art. 77.2)." },
        { q: "Plazo para interponer <strong>recurso de alzada</strong> cuando el acto administrativo es <strong>presunto</strong> (silencio) (Art. 122.1).", options: ["1 mes", "3 meses", "No tiene plazo"], correct: "C", feedback: "Cuando el acto es presunto, el recurso puede interponerse <strong>en cualquier momento</strong> a partir del d√≠a siguiente a que se produzcan los efectos del silencio (Art. 122.1)." },
        { q: "Plazo <strong>m√°ximo</strong> de validez de los <strong>poderes de representaci√≥n</strong> inscritos en el registro (Art. 6.6).", options: ["1 a√±o", "4 a√±os", "5 a√±os"], correct: "C", feedback: "Los poderes inscritos tendr√°n una validez m√°xima de <strong>5 a√±os</strong> (Art. 6.6)." },
        { q: "Plazo para la interposici√≥n del <strong>recurso de reposici√≥n</strong> cuando el acto es <strong>expreso</strong> (Art. 124.1).", options: ["10 d√≠as", "1 mes", "3 meses"], correct: "B", feedback: "El plazo es de <strong>1 mes</strong>, contado desde el d√≠a siguiente al de la notificaci√≥n (Art. 124.1)." },
        { q: "Plazo para <strong>subsanar la falta o insuficiente acreditaci√≥n de la representaci√≥n</strong> (Art. 5.6).", options: ["7 d√≠as", "10 d√≠as", "15 d√≠as"], correct: "B", feedback: "El interesado dispone de un plazo de <strong>10 d√≠as</strong> para subsanar la falta o insuficiencia (Art. 5.6)." },
        { q: "Plazo para <strong>confirmar, modificar o levantar las medidas provisionales</strong> una vez dictado el acuerdo de iniciaci√≥n (Art. 56.2).", options: ["10 d√≠as", "15 d√≠as", "30 d√≠as"], correct: "B", feedback: "Las medidas deben ser confirmadas, modificadas o levantadas en el acuerdo de iniciaci√≥n o en un acuerdo posterior en los <strong>15 d√≠as</strong> siguientes (Art. 56.2)." },
        { q: "Plazo para <strong>remitir el recurso de alzada</strong> por el √≥rgano que dict√≥ el acto al √≥rgano competente para resolverlo (Art. 121.2).", options: ["5 d√≠as", "10 d√≠as", "15 d√≠as"], correct: "B", feedback: "El √≥rgano debe remitir el recurso y el expediente en el plazo de <strong>10 d√≠as</strong> (Art. 121.2)." },
        { q: "Plazo para la <strong>remisi√≥n de informes</strong> ya elaborados desde que son solicitados (Art. 28.2).", options: ["5 d√≠as", "10 d√≠as", "15 d√≠as"], correct: "B", feedback: "Si el informe ya fue elaborado, se remite en el plazo de <strong>10 d√≠as</strong> (Art. 28.2)." },
        { q: "Plazo <strong>m√°ximo</strong> de suspensi√≥n por solicitud de <strong>informes preceptivos a otro √≥rgano</strong> (Art. 22.1).", options: ["1 mes", "3 meses", "6 meses"], correct: "B", feedback: "La suspensi√≥n por informes preceptivos no podr√° exceder en ning√∫n caso de <strong>3 meses</strong> (Art. 22.1)." },
        { q: "Plazo m√°ximo para comunicar a los interesados <strong>cuestiones conexas no planteadas</strong> para alegaciones (Art. 88.1).", options: ["7 d√≠as", "15 d√≠as", "20 d√≠as"], correct: "B", feedback: "Se comunica la cuesti√≥n a los interesados para que formulen alegaciones en un plazo no superior a <strong>15 d√≠as</strong> (Art. 88.1)." },
        { q: "Plazo <strong>m√≠nimo</strong> para las <strong>alegaciones de hechos o documentos nuevos</strong> (Art. 118.1).", options: ["10 d√≠as", "15 d√≠as", "20 d√≠as"], correct: "A", feedback: "El plazo no podr√° ser inferior a <strong>10 d√≠as</strong> ni superior a 15 d√≠as (Art. 118.1)." },
        { q: "Plazo para remitir la <strong>propuesta de resoluci√≥n</strong> en <strong>responsabilidad patrimonial</strong> (Art. 81.2).", options: ["10 d√≠as", "15 d√≠as", "30 d√≠as"], correct: "A", feedback: "El √≥rgano instructor remitir√° su propuesta al √≥rgano competente en el plazo de <strong>10 d√≠as</strong> (Art. 81.2)." },
        { q: "Plazo <strong>m√≠nimo</strong> para las <strong>alegaciones iniciales</strong> en <strong>tramitaci√≥n simplificada</strong> (Art. 96.6).", options: ["5 d√≠as", "7 d√≠as", "10 d√≠as"], correct: "C", feedback: "El plazo para alegaciones ser√°, como m√≠nimo, de <strong>10 d√≠as</strong> (Art. 96.6)." },
        { q: "Plazo para la <strong>expedici√≥n de copias aut√©nticas de documentos p√∫blicos</strong> (Art. 27.4).", options: ["10 d√≠as", "15 d√≠as", "30 d√≠as"], correct: "B", feedback: "La copia debe expedirse en el plazo de <strong>quince d√≠as</strong> a contar desde la recepci√≥n de la solicitud (Art. 27.4)." },
        { q: "Plazo para <strong>comunicar al interesado el plazo m√°ximo de resoluci√≥n y los efectos del silencio</strong> (Art. 21.4).", options: ["7 d√≠as", "10 d√≠as", "15 d√≠as"], correct: "B", feedback: "La comunicaci√≥n se debe realizar en los <strong>10 d√≠as</strong> siguientes a la fecha en que la solicitud haya tenido entrada en el registro (Art. 21.4)." },
        { q: "Plazo <strong>m√°ximo de resoluci√≥n supletorio</strong> si la norma reguladora no fija uno (Art. 21.3).", options: ["1 mes", "3 meses", "6 meses"], correct: "B", feedback: "El plazo m√°ximo ser√° de <strong>3 meses</strong> (Art. 21.3)." },
        { q: "Plazo <strong>m√°ximo de caducidad del procedimiento iniciado de oficio</strong> sin resoluci√≥n (Art. 106.5).", options: ["3 meses", "6 meses", "1 a√±o"], correct: "B", feedback: "La caducidad se produce en <strong>6 meses</strong> desde su iniciaci√≥n (Art. 106.5)." },
        { q: "Plazo para dictar y notificar la resoluci√≥n de un <strong>recurso de reposici√≥n</strong> (Art. 124.2).", options: ["1 mes", "3 meses", "6 meses"], correct: "A", feedback: "El plazo m√°ximo para resolver y notificar es de <strong>1 mes</strong> (Art. 124.2)." },
        { q: "Plazo <strong>m√°ximo de suspensi√≥n</strong> por solicitud de <strong>informe al CGPJ</strong> en responsabilidad patrimonial (Art. 81.3).", options: ["2 meses", "3 meses", "6 meses"], correct: "A", feedback: "La suspensi√≥n no podr√° exceder de <strong>2 meses</strong> (Art. 81.3)." },
        { q: "Plazo <strong>m√°ximo</strong> para <strong>resolver y notificar</strong> cuando lo fija una norma con rango de Ley o la normativa europea (Art. 21.2).", options: ["3 meses", "6 meses", "1 a√±o"], correct: "B", feedback: "El plazo m√°ximo ser√° de <strong>6 meses</strong>, salvo que una norma con rango de Ley o el Derecho de la Uni√≥n Europea establezcan otro (Art. 21.2)." },
        { q: "Plazo para dar audiencia al inculpado si la sanci√≥n es de <strong>mayor gravedad</strong> que la propuesta (Art. 90.2).", options: ["10 d√≠as", "15 d√≠as", "20 d√≠as"], correct: "B", feedback: "Se conceder√° al inculpado un nuevo tr√°mite de audiencia por plazo no superior a <strong>15 d√≠as</strong> (Art. 90.2)." },
        { q: "Plazo <strong>m√°ximo de suspensi√≥n</strong> por dictamen del <strong>Consejo de Estado</strong> en responsabilidad patrimonial (Art. 81.2).", options: ["1 mes", "2 meses", "3 meses"], correct: "B", feedback: "La suspensi√≥n no podr√° exceder de <strong>2 meses</strong> (Art. 81.2)." },
        { q: "Plazo <strong>m√°ximo</strong> para la <strong>pr√°ctica de actuaciones complementarias</strong> (Art. 87).", options: ["7 d√≠as", "10 d√≠as", "15 d√≠as"], correct: "C", feedback: "El plazo no podr√° ser superior a <strong>15 d√≠as</strong> (Art. 87)." }
    ];

    // Variables globales
    let currentQuestionIndex = 0;
    let score = 0;
    const quizSize = 10;
    let currentQuizQuestions = [];
    let totalQuestions = quizSize;

    const quizContainer = document.getElementById('quiz-container');
    const actionButton = document.getElementById('action-button');
    const feedbackDiv = document.getElementById('feedback');
    let quizState = 'CHECK_ANSWER';

    /**
     * 1. Genera una selecci√≥n aleatoria de 10 preguntas.
     */
    function getRandomQuestions() {
        const fullBank = [...questions];
        
        // Algoritmo Fisher-Yates (Shuffle)
        for (let i = fullBank.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [fullBank[i], fullBank[j]] = [fullBank[j], fullBank[i]];
        }
        
        currentQuizQuestions = fullBank.slice(0, quizSize);
        totalQuestions = currentQuizQuestions.length;

        currentQuestionIndex = 0;
        score = 0;
    }

    /**
     * 2. Inicializa el quiz: genera preguntas y carga la primera.
     */
    function initQuiz() {
        getRandomQuestions();
        loadQuestion(); 
    }

    /**
     * 3. Carga la pregunta actual.
     */
    function loadQuestion() {
        if (currentQuestionIndex >= totalQuestions) {
            showResults();
            return;
        }

        const qData = currentQuizQuestions[currentQuestionIndex];
        const optionLabels = ["A", "B", "C"];
        
        let html = `<div class="question-box">
            <p><strong>Pregunta ${currentQuestionIndex + 1} de ${totalQuestions}:</strong> ${qData.q}</p>
            <div class="options">`;

        qData.options.forEach((option, index) => {
            const label = optionLabels[index];
            html += `<label>
                <input type="radio" name="question" value="${label}">
                ${label}) ${option}
            </label>`;
        });

        html += `</div></div>`;
        quizContainer.innerHTML = html;
        
        actionButton.textContent = "Verificar Respuesta";
        feedbackDiv.innerHTML = 'Selecciona una opci√≥n.';
        feedbackDiv.className = ''; 
        quizState = 'CHECK_ANSWER';
    }

    /**
     * 4. Verifica la respuesta y muestra la retroalimentaci√≥n detallada.
     */
    function checkAnswer() {
        const selectedOption = document.querySelector('input[name="question"]:checked');
        
        if (!selectedOption) {
            alert("Por favor, selecciona una respuesta antes de verificar.");
            return;
        }

        const qData = currentQuizQuestions[currentQuestionIndex];
        const userAnswer = selectedOption.value;
        const correct = qData.correct;
        const correctOptionText = qData.options[correct.charCodeAt(0) - 'A'.charCodeAt(0)];
        const feedbackText = qData.feedback;

        // Deshabilitar opciones
        document.querySelectorAll('input[name="question"]').forEach(input => {
            input.disabled = true;
        });

        if (userAnswer === correct) {
            score++;
            feedbackDiv.className = 'correct';
            feedbackDiv.innerHTML = `‚úÖ <strong>¬°Respuesta Correcta!</strong> Puntuaci√≥n: ${score}/${currentQuestionIndex + 1}`;
        } else {
            feedbackDiv.className = 'incorrect';
            feedbackDiv.innerHTML = `‚ùå <strong>Respuesta Incorrecta.</strong> La correcta era <strong>${correct}) ${correctOptionText}</strong>. Puntuaci√≥n: ${score}/${currentQuestionIndex + 1}`;
        }

        // A√±adir retroalimentaci√≥n detallada
        feedbackDiv.innerHTML += `<div class="feedback-details"><strong>Retroalimentaci√≥n:</strong> ${feedbackText}</div>`;

        // Preparar para avanzar
        actionButton.textContent = (currentQuestionIndex < totalQuestions - 1) ? "Siguiente Pregunta" : "Ver Resultados Finales";
        quizState = 'ADVANCE';
    }

    function advanceQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }

    function handleQuizClick() {
        if (quizState === 'CHECK_ANSWER') {
            checkAnswer();
        } else if (quizState === 'ADVANCE') {
            advanceQuestion();
        }
    }

    /**
     * Muestra resultados y el bot√≥n para un nuevo test.
     */
    function showResults() {
        quizContainer.style.display = 'none';
        actionButton.style.display = 'none';
        feedbackDiv.style.display = 'none';
        
        const resultScreen = document.getElementById('result-screen');
        resultScreen.innerHTML = `
            <div class="score-box">
                <h2>üéâ Test Finalizado üéâ</h2>
                <p>Has respondido correctamente <strong>${score}</strong> de <strong>${totalQuestions}</strong> preguntas.</p>
                <p style="font-size: 1.1em; font-weight: bold; color: #007bff;">¬°Sigue practicando!</p>
                <button onclick="startNewQuiz()">Generar Nuevo Test de ${quizSize} Preguntas</button>
            </div>
        `;
        resultScreen.style.display = 'block';
    }

    /**
     * Reinicia el quiz.
     */
    function startNewQuiz() {
        document.getElementById('result-screen').style.display = 'none';
        quizContainer.style.display = 'block';
        actionButton.style.display = 'block';
        feedbackDiv.style.display = 'block';

        getRandomQuestions();
        loadQuestion();
    }
    
    // ‚≠ê EL MECANISMO DE CARGA M√ÅS SEGURO
    // Asegura que la funci√≥n initQuiz() se ejecute solo cuando el DOM est√° completamente cargado.
    document.addEventListener('DOMContentLoaded', initQuiz);
</script>

</body>
</html>